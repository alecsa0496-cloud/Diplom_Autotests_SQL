# Финальный проект


### Практический блок: вторая часть
##### Работа с базой данных
Задание 1
Представь: тебе нужно проверить, отображается ли созданный заказ в базе данных.
Для этого: выведи список логинов курьеров с количеством их заказов в статусе «В доставке» (поле inDelivery = true). 

```py
SELECT c.login, COUNT(o.id) AS "deliveryCount"
FROM "Couriers" AS c
LEFT JOIN "Orders" AS o ON c.id = o."courierId" AND o."inDelivery" = true
GROUP BY c.login;
```
Задание 2
Ты тестируешь статусы заказов. Нужно убедиться, что в базе данных они записываются корректно.
Для этого: выведи все трекеры заказов и их статусы. 
Статусы определяются по следующему правилу:
Если поле finished == true, то вывести статус 2.
Если поле canсelled == true, то вывести статус -1.
Если поле inDelivery == true, то вывести статус 1.
Для остальных случаев вывести 0.

```py
SELECT
    track,
    CASE
        WHEN finished THEN 2
        WHEN cancelled THEN -1
        WHEN inDelivery THEN 1
        ELSE 0
    END AS status
FROM "Orders";
```

#### Подключение к базе данных:
psql -U morty -d scooter_rent
Пароль: smith

##### Автоматизация теста к API
Теперь автоматизируй сценарий, который подготовили коллеги-тестировщики:
1. Клиент создает заказ.
2. Проверяется, что по треку заказа можно получить данные о заказе.

Шаги автотеста:
1. Выполнить запрос на создание заказа.
2. Сохранить номер трека заказа.
3. Выполнить запрос на получения заказа по треку заказа.
4. Проверить, что код ответа равен 200.

### Установка и запуск
#### Проверка работы API
Перед запуском тестов убедитесь, что тестовый стенд доступен. 

#### Установка необходимых пакетов:
```bash
pip install requests pytest
```
#### Запуск через pytest
pytest test_order.py -v
#### Или прямой запуск
python test_order.py

#### Структура проекта
├── configuration.py    # Настройки URL и эндпоинтов
├── data.py            # Тестовые данные заказа
├── sender_stand_request.py  # Функции для работы с API
├── test_order.py      # Автотест создания и получения заказа
└── README.md          # Документация (этот файл)

### Стек для выполнения проекта
* SQL (PostgreSQL)
* GitHub
* requests
* pytest
